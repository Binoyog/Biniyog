<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Withdraw Approval</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#eef5ff;
}
.header{
    background:#0d47a1;
    color:#fff;
    text-align:center;
    padding:15px;
    font-size:22px;
}
.card{
    background:#fff;
    margin:15px;
    padding:15px;
    border-radius:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.2);
}
button{
    padding:8px 14px;
    margin-right:8px;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
.approve{ background:green; color:white; }
.reject{ background:red; color:white; }
.pending{ color:orange; font-weight:bold; }
</style>
</head>

<body>

<div class="header">Admin Withdraw Requests</div>
<div id="list"></div>

<script>
let withdraws = JSON.parse(localStorage.getItem("withdrawRequests")) || [];

function render(){
    let box = document.getElementById("list");
    if(withdraws.length === 0){
        box.innerHTML="<p style='text-align:center'>No withdraw requests</p>";
        return;
    }

    let html="";
    withdraws.forEach((w,i)=>{
        html+=`
        <div class="card">
            <p>Number: ${w.number}</p>
            <p>Amount: à§³${w.amount}</p>
            <p>Method: ${w.method}</p>
            <p>Date: ${w.date}</p>
            <p class="pending">Status: ${w.status}</p>
            ${w.status==="Pending" ? `
            <button class="approve" onclick="approve(${i})">Approve</button>
            <button class="reject" onclick="reject(${i})">Reject</button>
            `:""}
        </div>
        `;
    });
    box.innerHTML=html;
}

function approve(i){
    let balance = parseInt(localStorage.getItem("balance")) || 0;
    balance -= withdraws[i].amount;
    localStorage.setItem("balance", balance);

    withdraws[i].status="Approved";
    localStorage.setItem("withdrawRequests", JSON.stringify(withdraws));
    render();
}

function reject(i){
    withdraws[i].status="Rejected";
    localStorage.setItem("withdrawRequests", JSON.stringify(withdraws));
    render();
}

render();
</script>

</body>
</html>
