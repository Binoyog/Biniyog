<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Deposit Approval</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#f0f4ff;
}
.header{
    background:#1a237e;
    color:#fff;
    text-align:center;
    padding:15px;
    font-size:22px;
}
.card{
    background:#fff;
    margin:15px;
    padding:15px;
    border-radius:12px;
    box-shadow:0 2px 8px rgba(0,0,0,0.2);
}
.pending{
    color:orange;
    font-weight:bold;
}
.approved{
    color:green;
    font-weight:bold;
}
button{
    padding:8px 14px;
    margin-right:10px;
    border:none;
    border-radius:8px;
    font-size:14px;
    cursor:pointer;
}
.approve{
    background:#2e7d32;
    color:white;
}
.reject{
    background:#c62828;
    color:white;
}
.balance{
    text-align:center;
    margin:15px;
    font-size:18px;
    font-weight:bold;
    color:green;
}
</style>
</head>

<body>

<div class="header">üõ†Ô∏è Admin Deposit Approval</div>

<div class="balance">
User Balance: ‡ß≥<span id="balance">0</span>
</div>

<div id="depositList"></div>

<script>
let deposits = JSON.parse(localStorage.getItem("pendingDeposits")) || [];
let balance = Number(localStorage.getItem("balance")) || 0;

document.getElementById("balance").innerText = balance;

function save(){
    localStorage.setItem("pendingDeposits", JSON.stringify(deposits));
    localStorage.setItem("balance", balance);
}

function render(){
    let html = "";

    if(deposits.length === 0){
        html = "<p style='text-align:center'>‚ùå ‡¶ï‡ßã‡¶®‡ßã Pending Deposit ‡¶®‡ßá‡¶á</p>";
    }

    deposits.forEach((d, i)=>{
        html += `
        <div class="card">
            <p><b>Amount:</b> ‡ß≥${d.amount}</p>
            <p><b>Method:</b> ${d.method}</p>
            <p><b>Trx ID:</b> ${d.trxid}</p>
            <p><b>Date:</b> ${d.date}</p>
            <p class="pending">Status: ${d.status}</p>

            ${
                d.status === "Pending"
                ? `
                <button class="approve" onclick="approve(${i})">Approve</button>
                <button class="reject" onclick="reject(${i})">Reject</button>
                `
                : `<p class="approved">‚úî Approved</p>`
            }
        </div>
        `;
    });

    document.getElementById("depositList").innerHTML = html;
}

function approve(index){
    if(deposits[index].status !== "Pending") return;

    balance += Number(deposits[index].amount);
    deposits[index].status = "Approved";

    save();
    render();
    document.getElementById("balance").innerText = balance;
}

function reject(index){
    deposits[index].status = "Rejected";
    save();
    render();
}

render();
</script>

</body>
</html>
