<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Dashboard | Biniyog</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<h2>ড্যাশবোর্ড</h2>

<p><b>নাম:</b> <span id="name">লোড হচ্ছে...</span></p>
<p><b>ইমেইল:</b> <span id="email"></span></p>
<p><b>ব্যালেন্স:</b> ৳ <span id="balance">0</span></p>

<button onclick="logout()">Logout</button>

<script type="module">
  import { onAuthStateChanged, signOut } 
  from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getDoc, doc } 
  from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const auth = window.firebaseAuth;
  const db = window.firebaseDB;

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "login.html";
      return;
    }

    const snap = await getDoc(doc(db, "users", user.uid));
    if (snap.exists()) {
      const data = snap.data();
      document.getElementById("name").innerText = data.name;
      document.getElementById("email").innerText = data.email;
      document.getElementById("balance").innerText = data.balance;
    }
  });

  window.logout = function () {
    signOut(auth);
  }
</script>

</body>
</html>
